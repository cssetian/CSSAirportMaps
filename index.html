<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Let's Make Some Maps!</title>
  <link rel="stylesheet" href="styles/bootstrap.css" />
  <link rel="stylesheet" href="styles/bootstrap-theme.css" />
  <link rel="stylesheet" href="styles/typeaheadjs.css">
  <link rel="stylesheet" href="styles/map-it.css" />
</head>
<body>
  <div id="app-container" class="container hidden">
    <h1>Let's Plot Some Maps</h1>
    <hr />
    <div id="input-container" class="module">
      <h2>Input</h2>
      <table id="airport-search-container" class="table input-table">
        <thead>
          <tr>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th class="input-label first-input-column">Departure Airport:</th>
            <td><!-- value: departureAirport().airportSearchTerm,-->
              <div id="departure-airport-selector-container">
                <input  id="departure-airport-selector"
                        class="typeahead second-input-column required"
                        type="text"
                        autocomplete="off"
                        placeholder="Type to search for a departure airport..."
                        data-bind=" value: departureAirport().airportSearchTerm
                                    valueUpdate: 'input' "/>
                <input type="hidden" name="departureAirportId" id="departureAirportId" value="" />
              </div>
            </td>  <!-- data-list input to go with local json or pidgits data -->
          </tr>
          <tr>
            <th class="input-label first-input-column">Arrival Airport:</th>
            <td><!-- value: arrivalAirport().airportSearchTerm, -->
              <div id="arrival-airport-selector-container">
                <input  id="arrival-airport-selector"
                        class="typeahead second-input-column required"
                        autocomplete="off"
                        type="text" 
                        placeholder="Type to search for an arrival airport..." 
                        data-bind=" value: arrivalAirport().airportSearchTerm
                                    valueUpdate: 'input'" />
                <input type="hidden" name="arrivalAirportId" id="arrivalAirportId" value="" />
              </div>
            </td> <!-- data-list input to go with local json or pidgits data -->
          </tr>
        </tbody>
      </table>
    </div>

    <div id="results-container" class="module">
      <h2>Results</h2>
      <table id="departure-airport-data-container" class="table results-data">
        <thead>
          <tr>
            <th class='first-column'></th>
            <th class='second-column'>Departure Airport</th>
            <th class='third-column hidden-700'>Arrival Airport</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Airport Name:</td>
            <!-- ko if: typeof departureAirport().selectedSearchResultObj().name !== 'undefined' -->
            <td><span data-bind="text: departureAirport().selectedSearchResultObj().name"></span></td>
            <!-- /ko -->

            <!-- ko if: typeof arrivalAirport().selectedSearchResultObj().name !== 'undefined' -->
            <td class="hidden-700"><span data-bind="text: arrivalAirport().selectedSearchResultObj().name" class="hidden-600"></span></td>
            <!-- /ko -->
          </tr><!--
          <tr>
            <td>Airport Code:</td>
            <td><span data-bind="text: departureAirport().selectedSearchResultObj().code"></span></td>
            <td class="hidden-700"><span data-bind="text: arrivalAirport().selectedSearchResultObj().code" class="hidden-600"></span></td>
          </tr>
          <tr>
            <td>City:</td>
            <td><span data-bind="text: departureAirport().selectedSearchResultObj().city"></span></td>
            <td class="hidden-700"><span data-bind="text: arrivalAirport().selectedSearchResultObj().city" class="hidden-600"></span></td>
          </tr>
          <tr>
            <td>State:</td>
            <td><span data-bind="text: departureAirport().selectedSearchResultObj().state"></span></td>
            <td class="hidden-700"><span data-bind="text: arrivalAirport().selectedSearchResultObj().state" class="hidden-600"></span></td>
          </tr>
          <tr>
            <td>Country:</td>
            <td><span data-bind="text: departureAirport().selectedSearchResultObj().country"></span></td>
            <td class="hidden-700"><span data-bind="text: arrivalAirport().selectedSearchResultObj().country" class="hidden-600"></span></td>
          </tr>-->
          <tr>
            <td>Latitude:</td>
            <td>
              <!-- ko if: typeof departureAirport().selectedSearchResultObj().lat !== 'undefined' -->
                <span data-bind="text: departureAirport().selectedSearchResultObj().lat"></span>
              <!-- /ko -->
            </td>
            <td class="hidden-700">
              <!-- ko if: typeof arrivalAirport().selectedSearchResultObj().lat !== 'undefined' -->
                <span data-bind="text: arrivalAirport().selectedSearchResultObj().lat" class="hidden-600"></span>
              <!-- /ko -->
            </td>
          </tr>
          <tr>
            <td>Longitude:</td>
            <td>
              <!-- ko if: typeof departureAirport().selectedSearchResultObj().lng !== 'undefined' -->
                <span data-bind="text: departureAirport().selectedSearchResultObj().lng"></span>
              <!-- /ko -->
            </td>
            <td class="hidden-700">
              <!-- ko if: typeof arrivalAirport().selectedSearchResultObj().lng !== 'undefined' -->
                <span data-bind="text: arrivalAirport().selectedSearchResultObj().lng"></span>
              <!-- /ko -->
            </td>
          </tr>
        </tbody>
      </table>

      <table id="arrival-airport-data-container" class="table display-700 results-data">
        <thead>
          <tr>
            <th class='first-column'></th>
            <th class='third-column'>Arrival Airport</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Airport Name:</td>
            <td><span data-bind="text: arrivalAirport().selectedSearchResultObj().name"></span></td>
          </tr><!--
          <tr>
            <td>Airport Code:</td>
            <td><span data-bind="text: arrivalAirport().selectedSearchResultObj().code"></span></td>
          </tr>
          <tr>
            <td>City:</td>
            <td><span data-bind="text: arrivalAirport().selectedSearchResultObj().city"></span></td>
          </tr>
          <tr>
            <td>State:</td>
            <td><span data-bind="text: arrivalAirport().selectedSearchResultObj().state"></span></td>
          </tr>
          <tr>
            <td>Country:</td>
            <td><span data-bind="text: arrivalAirport().selectedSearchResultObj().country"></span></td>
          </tr>-->
          <tr>
            <td>Latitude:</td>
            <td>
              <!-- ko if: typeof arrivalAirport().selectedSearchResultObj().lat !== undefined -->
                <span data-bind="text: arrivalAirport().selectedSearchResultObj().lat"></span>
              <!-- /ko -->
            </td>
          </tr>
          <tr>
            <td>Longitude:</td>
            <td>
              <!-- ko if: typeof arrivalAirport().selectedSearchResultObj().lat !== undefined -->
                <span data-bind="text: arrivalAirport().selectedSearchResultObj().lng"></span>
              <!-- /ko -->
            </td>
          </tr>
        </tbody>
      </table>
        
      <table id="airport-computed-results-data" class="table results-data">
        <thead>
          <tr>
            <th class="first-column">Units</th>
            <th class="second-column">Distance</th>
          </tr>
        </th>
        <tr>
          <td>Kilometers:</td>
          <td>
            <!-- ko if: typeof departureAirport().selectedSearchResultObj().name !== undefined && arrivalAirport().selectedSearchResultObj().name !== undefined-->
            <span data-bind="text: distBtwnAirports('Km')"></span>
            <!-- /ko -->
          </td>
        </tr>
        <tr>
          <td>Miles:</td>
          <td>
            <!-- ko if: typeof departureAirport().selectedSearchResultObj().name !== undefined && arrivalAirport().selectedSearchResultObj().name !== undefined -->
            <div data-bind="text: distBtwnAirports('M')"></div>
            <!-- /ko -->
          </td>
        </tr>
        <tr>
          <td>Nautical Miles:</td>
          <td>
            <!-- ko if: typeof departureAirport().selectedSearchResultObj().name !== undefined && arrivalAirport().selectedSearchResultObj().name !== undefined -->
            <div data-bind="text: distBtwnAirports('NM')"></div>
            <!-- /ko -->
          </td>
        </tr>
      </table>
    </div>
    
    <div id="map-container" class="module">
      <div id="map-canvas" style="height:400px"></div>
    </div>

  </div>

</body>
<footer class="footer">
<div>Authored By: Chris Setian</div>
<div>Last Updated: 
  <script>
  document.write(document.lastModified);
  </script>
</div>
</footer>

<div visibility="hidden">
  <datalist autocomplete="off" id="departure-airports-list">
  </datalist>

  <datalist autocomplete="off" id="arrival-airports-list">
  </datalist>

  <script type="text/javascript" src="scripts/lib/jquery-2.1.0.js"></script>
  <script type="text/javascript" src="scripts/lib/underscore-1.6.0.js"></script>
  <script type="text/javascript" src="scripts/lib/knockout-3.1.0.js"></script>
  <script type="text/javascript" src="scripts/lib/knockout.mapping-latest.debug.js"></script>
  <script type="text/javascript" src="scripts/ko.bindings.js"></script>
  <script type="text/javascript" src="scripts/lib/knockout-bootstrap.min.js"></script>
  <script type="text/javascript" src="scripts/lib/bootstrap.js"></script>
  <script type="text/javascript" src="scripts/lib/typeahead.bundle.js"></script>
  <script type="text/javascript" src="scripts/lib/knockout.bindings.typeahead.js"></script>
  <script type="text/javascript" src="scripts/lib/handlebars-v1.3.0.js"></script>
  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script>
  <script type="text/javascript" src="scripts/lib/latlong.js"></script>
  <script type="text/javascript" src="scripts/MapIt_App.js"></script>
  <script type="text/javascript" src="content/airports.js"></script>
  <script type="text/javascript" src="scripts/ViewModel.js"></script>
  <script type="text/javascript" src="scripts/Airport.js"></script>
  <script type="text/javascript" src="content/dummy-google-places.json"></script>
</div>

<script type="text/javascript">
  (function ($) {

    $( document ).ready(function() {

        MapIt.App.init({
          domEls: {
            appContainer: $("#app-container"),
            appTitle: $("#app-title"),
            departureSearch: $("#departure-airport-selector"),
            arrivalSearch: $("#arrival-airport-selector"),
            departureAirportsList: $("#departure-airports-list"),
            arrivalAirportsList: $("#arrival-airports-list")
          },
          Urls: {
            allAirportsUrl_XML: "http://airports.pidgets.com/v1/airports",
            allAirportsUrl_JSON: "http://airports.pidgets.com/v1/airports?format=json"
          },
          airportsJSON: airportsJSON
        });

    });

  })(jQuery);
</script>

</html>